# 构建固件

## 获取代码

    git clone https://github.com/xrobot-org/XRobot.git

## 初始化第三方库

如果在中国大陆，由于网络问题，初始化可能失败。可在初始化之前将`.gitmodules`文件中所有github的链接指向我在gitee的镜像。

例如：<https://github.com/ulfalizer/Kconfiglib> -> <https://gitee.com/jiu-xiao/Kconfiglib>

    git submodule init && git submodule update

## 配置工程

### 手动创建一个新配置

`./project.py config`
![配置界面](../img/配置工具.png?raw=true "配置界面")

### 选择已有的配置

1. 查看可编译目标
`./project.py list`

1. 选择加载某个编译目标的配置文件
例如：`./project.py select rm-c infantry`加载c板步兵配置。之后手动编译

## 构建

* GUI

    在VSCode下方工具栏里选择Build

* 命令行

     `cmake -DCMAKE\_TOOLCHAIN\_FILE:STRING=toolchain/toolchain.cmake -H. -B./build -G Ninja`

* 直接选择目标构建

    例如：`./project.py build rm-c infantry`编译C板步兵代码，或者使用`./project.py build all all`编译所有开发板的所有兵种代码。

## 固件

输出路径：`./build/src/xrobot.elf`
